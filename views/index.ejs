<!DOCTYPE html>
<html>
<head>
    <title>ðŸ”¥ DarkApps - R$0,20/Download</title>
    <meta name="viewport" content="width=device-width">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{background:linear-gradient(135deg,#0a0a0a,#1a1a2e);color:#00ff88;font-family:'Courier New';}
        .container{max-width:900px;margin:0 auto;padding:20px;}
        .header{text-align:center;padding:40px 0;background:rgba(0,255,136,0.1);border-bottom:2px solid #00ff88;}
        h1{font-size:3em;text-shadow:0 0 20px #00ff88;}
        .upload-box{background:rgba(0,0,0,0.8);padding:40px;margin:30px 0;border:2px solid #00ff88;border-radius:15px;}
        input[type=file]{width:100%;padding:20px;font-size:18px;background:#111;color:#00ff88;border:2px solid #00ff88;border-radius:10px;}
        .btn{background:linear-gradient(45deg,#00ff88,#00cc6a);color:#000;padding:20px 50px;font-size:20px;border:none;border-radius:50px;cursor:pointer;font-weight:bold;}
        .btn:hover{transform:scale(1.05);}
        .success{background:rgba(0,255,0,0.2);border:2px solid #00ff88;padding:20px;margin:20px 0;border-radius:10px;}
        #progress{display:none;background:#111;border:1px solid #00ff88;border-radius:10px;padding:10px;margin:10px 0;}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ”¥ DARKAPPS</h1>
            <p>APKs â€¢ MP4 â€¢ ZIP â€¢ R$0,20/Download + R$0,05/View</p>
        </div>
        
        <% if(success) { %>
        <div class="success">
            âœ… Upload concluÃ­do!<br>
            <strong>LINK:</strong> <a href="<%= link %>" target="_blank"><%= link %></a>
        </div>
        <% } %>
        
        <div class="upload-box">
            <h2>ðŸ“¤ UPLOAD GRATUITO</h2>
            <form id="uploadForm">
                <input type="file" id="fileInput" accept=".apk,.zip,.rar,.mp4,.mp3,.exe" required>
                <div id="progress">Uploading... <span id="progressText">0%</span></div>
                <button type="submit" class="btn">ðŸš€ ENVIAR</button>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('uploadForm').onsubmit = async (e) => {
            e.preventDefault();
            const file = document.getElementById('fileInput').files[0];
            const progress = document.getElementById('progress');
            const progressText = document.getElementById('progressText');
            
            progress.style.display = 'block';
            
            const formData = new FormData();
            formData.append('file', file);
            
            try {
                await axios.post('/upload', formData, {
                    onUploadProgress: (p) => {
                        progressText.textContent = Math.round(p.loaded / p.total * 100) + '%';
                    }
                });
                window.location.href = '/?success=true&link=' + encodeURIComponent(window.location.origin + '/dl/' + Math.random().toString(36).substr(2,8));
            } catch(e) {
                alert('Erro: ' + e.message);
            }
        };
    </script>
</body>
</html>
